# Building a Basic Home Lab Running Active Directory (Oracle VirtualBox)
Building and configuring Virtual Machines to house an Active Directory Enviroment on our Local Machine and Router. Setting up a Home Lab is an essential experience and resource to utilize for future skills and test.
## Objective
Provides a hands-on learning experience that covers essential concepts and skills in Windows network administration, virtualization, scripting, and user management. It serves as a foundational exercise for those aspiring to pursue careers in system administration, network engineering, or cybersecurity within Windows-based environments.

### Skills Learned
- Virtualization: Learn how to create, configure, and manage virtual machines (VMs) in Virtual Box.
- Operating Systems: Gain experience installing, configuring, and securing various operating systems (OS) within virtual machines.
- Network Configuration: Practice setting up and managing virtual networks, including IP addressing, DHCP, DNS, and routing.
- Network Configuration: Practice setting up and managing virtual networks, including IP addressing, DHCP, DNS, and routing.
- Development of critical thinking and problem-solving skills in cybersecurity.

### Tools Used
- Oracle Virtual Box
- Active Directory
- Powershell
- Windows Server Manager

## Plan Of Action + Diagram:
![image](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/d0ce77be-5ba7-4cda-bda7-076ab1c340b2)
### Domain Controller Process
First we're going to gather our Software, Oracle Virtual Box, Windows 10 ISO, and Server 2019 ISO. After Virtual Box is installed, we're going create 2 seperate machines. One with the Win 10 (our client) and the other with Server 2019 (Domain Controller). We'll deploy our Domain controller first as it house our Active Directory and we'll give it two network adapters, one for internal network and one for external (Internet). Once Domain Controller is up and running we're going to assign IP addressing to our **Internal** network. Next We'll install Active Directory(AD) to our Domain controller (DC). Then we'll configure Routing and NAT so the private network can connect to the internet through the DC. On the DC, we're going to them set up DHCP sp when a new client or Windows 10 machine can automatically get assigned an IP address. Before we move onto our client machine we'll run a Power Shell Script to create 100 users.
### Client Machine Process
Now that our users our created, we'll deploy our Client Machine with the Win 10 ISO file. This Client will be connected to the **Internal** VM network. We'll log into the client with one of user logins generated by our powershell script. At this point the project will be completed.
## Steps For Windows 10 Server Virtual Machine

 ![Oracle Website](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/7e1b309e-8b25-4f54-8128-2d4870d3a7c5)
 1. **Step 1**: To Start Off lets download [Oracle Virtual Box](https://www.virtualbox.org/). Once on the Webpage, Click the "Download Virtual Box" button which will take you to it's latest Platform packages. Click the Hosts that matches your OS. I will be doing a Windows installation.

![VM custom set up](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/eeace1f8-334b-4a4d-af6c-a071b940170d)   
 2. **Step 2**: Once Downloaded, Click next which will take you to the custom set up page which you can use to better utilize your systems re!
   - For instance, if you don't have enough storage on your C: Drive or Main Drive, install the application on another drive. Sometimes you may miss some dependencies on your system and have to download additional items. Allow the Setup programm to download these dependencies and follow through with the set up.
 ![Screenshot 2024-03-17 151331](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/695a4fcd-1216-4e47-b4ee-fab958a3030d)
3. **Step 3**: Once Downloaded, the application page should look like this.
 
 ![Win Installation Media Web Page](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/1b9de1c8-51c0-4f62-88b2-cd12cdbf63e0)
 4. **Step 4**: Next we'll need to download our ISO file or our Operating System we're going to virtualize. We will be virtualizing a [Windows 10 OS.](https://www.microsoft.com/en-us/evalcenter/download-windows-server-2019)
  - Once you download and open the setup file. Accept terms and then it will show a page asking what we would like to do.
    
![Win tool Installation Media option](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/00658c45-6d90-4d04-9afb-4426cd4198b6)
 5. **Step 5**: On the "What do you want to do?" page, we're going to select the **Second** option, Create installation media.
    - You can Select your language options to whatever you may like.
   
![Win tool Installation ISO file](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/f783d8e3-2056-4f2e-9613-c6772d03e6d4)
 6. **Step 6**: Choosing which Media to use should be an ISO File which can be downloaded anywhere on your PC. Please remember where you installed your ISO file.
      
![VM oracle New VM Pg](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/05af67f9-fa6a-42b9-942c-1bc199af4b3e)

 7. **Step 7**: Now we'll set up our VM in Oracle Virtual Box. Click the Spiky Blue Ball Icon labeled "New". Name the sandbox VM to Dpmain controller as this VM will be used to manage another Vm later on. Keep the folder selected the same. For the ISO Image, locate and select the Windows ISO file downloaded prevoiusly downloaded.
     - Check "Skip Unattended Installation" if you'd like to conifigure the amount of resources this VM utilizes. This can be updated later on. I will be skipping the Unattended Installation for this project. Click Next.
    ![VM oracle Summary Page](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/7b1c7290-a7ad-4f8c-8f35-f1716f16f6f8)

8. **Step 8**: For Hardware, I will using 4 Gb or 4096 Mbp of Memory and 1 Cpu Core. Virtual Memory I will keep at 50 Gb of Virtual Memory. Your summary Page should look like this^.

![VM Win Setup No Prod Key](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/77d598f1-75ad-4de7-8c3a-9d24daa85ab9)
9. **Step 9**: Next we're going to power on Our new VM within our Virtual Box Manager App. To do so, Click the Green Arrow "Start". Once it's running, a Windows 10 set up should appear. I'll be leaving my OS Language, time etc. all default so click next and install now.

![VM Windows Installing Page](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/436634ca-ae8e-4fdf-a765-892b8f8c0686)
10. **Step 10**: Next select Windows server 2019 Standard Evaluation (desktop experience). Accept License Terms. The type of Installation  we'll be doing is a Custom: Install Windows Only then click next. Next Windows should be Installing!

![VM log in screen](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/148b439d-6c04-49a0-9fe9-5e889a777041)
11. **Step 11**: Once Installed choose a password to memorize then click settings. It'll finish setting up and show a login screen to which you'll input your new password to login. 

![VM Insert Guest Additions File](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/748215d2-0f1a-4499-a9ed-9450c7f9ffbf)
12. **Step 12**: After Logging in you'll want to click yes on making the PC discoverable on the network. close out server Manager for now. To make the input smoother on the VM. At the top of the VM window click the Devices tab and select "Insert Guest Additions CD Image" then go into your File explorer and click "This PC"

![VM Guest Additions Reboot  later](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/b7eb8895-5130-4974-a2b1-6dd867e90912)
13. **Step 13**: Click the blue box with a star on it then click the file "VBoxWindowsAdditions-amd64". Complete the install fully through then select reboot later or reboot now if you'd like. 
![image](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/ff21cf3c-d18d-45ab-bae4-719fe3595586)
14. **Step 14**: Then in the Power setting of your VM, Shut down the VM. Go to your Virtual Box Manager App and start your Machine Back up. should notice a seamless integration of inputs. To Input "Ctrl+Alt+Delete" into the VM. Located at the top of your VM window is an Input Tab, Click the tab then select keyboard and "Ctrl+Alt+Delete". At  this part of the Project, your Home Lab is considered complete. However from here on will be setting up our active directory which will utilize the VM as a Domain Controller.

## Setting up Active Directory
![Screenshot 2024-03-18 220823](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/a4f14804-ec9c-4e19-a0b5-fb6cf7aa7a47)

15. **Step 15**: Next we're going to go into our DC's Setting within the Virtual Box Manager Page and add an additional Network adapter. On the Adapter 2 settings attach it to Internal Network option. Once set click OK. The DC should be updated to now show two Ethernet connection. 
    - Referring back to the Diagram we're going to have our DC have two Network Interface Cards. The first Adapter will have NAT enabled which will connect our DC to our Internet. The second Adapter will be our Internal Network to connect all our client VMs.

![image](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/b3d46a9d-6d5d-4f06-b28d-91d36a44c5cc)
16. **Step 16**: Going back into our DC VM, We're going Rename both our DC VM and our two NICs. To Rename your PC, going into the Settings App and in the Search Bar Type "About Your PC" this will Pull up a page for you to Scroll down and Click the "Rename PC" Button and Rename the PC to DC then Restart your computer immediately. 
 - Renaming your PC and NIC helps later in the long run when configuring Active Directory. 

![image](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/f75dabcd-af63-49c3-bf0d-e5c4c65099fc)
17. **Step 17**: Once DC VM is rebooted and your logged in. Go back into Settings and into  the Network and Settings Tab > then on the left select Ethernet> then click "Change Adapter Options." This Page should display to Similar Icons one Named Ethernet and the Other Named Ethernet 2. To distinguish the NAT NIC and the Internal NIC we're going to right click on one of them to view the IPv4 Address.

![Screenshot 2024-03-18 222240](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/4e6b7834-d6d4-4412-8b55-b35e132a0864)
18. **Step 18**: To tell the difference between an Internal connections vs Internet Connection is the IPv4 address. To look into each NICs IP details, double click on of the Ethernet options the Click "Details". Shown Above is the Internal Network due to it being Assigned an APIPA Address. Since we know which NIC is which. Let's Rename each one to their respective connections by Right Clicking on each one> selecting Rename. I suggest Renaming each one to the nature of their connection.
    - An Internal network will have an APIPA Address, which is assigned by DHCP if the PC cannot connect to the Internet. I.E IPv4: 169.254.0.1
    - An NAT/ Internet connected Network will have a Public IP as well as your Internet Company's DNS Server connected. I.E IPv4: 10.0.2.15

![Screenshot 2024-03-18 225616](https://github.com/Cal-InfoSec/SIEM-Azure/assets/81139563/8fb4475a-c06f-4b4f-8a3e-9ea8ebafec32)
19. **Step 19**: Now that we've established which NIC is which. We're going to Assign our Internal NIC an IP address. Now refering back to our Diagram, We'll be assign our Internal NIC all the same Addresses listed. the IP, Mask, DNS. You'll notice that Gateway is empty. This is due to our DC will eventually act as a DHCP once Active Directory is installed. To access the NIC's IP settings, right click on the icon and select properties > then select "Internet Protocol Version 4". Once there fill in all fields to match the Diagram. Click Ok once all fields are filled in. 

20. **Step 20**:

21. **Step 21**:

22. **Step 22**:

23. **Step 23**:

24. **Step 24**:

25. **Step 25**:

26. **Step 26**:
